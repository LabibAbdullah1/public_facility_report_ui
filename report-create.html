<!DOCTYPE html>
<html lang="id">

<head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Buat Laporan | LaporPublik</title>
      <script src="https://cdn.tailwindcss.com"></script>
      <!-- Leaflet CSS -->
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
      <!-- Leaflet JS -->
      <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>

<body class="bg-gray-50 text-gray-800">
      <!-- Navbar -->
      <nav class="bg-white shadow sticky top-0 z-[9999]">
            <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
                  <h1 class="text-xl font-bold text-blue-600">LaporPublik</h1>
                  <div class="hidden md:flex space-x-6">
                        <a href="index.html" class="hover:text-blue-500">Beranda</a>
                        <a href="report-create.html" class="text-blue-600 font-semibold">Buat Laporan</a>
                        <a href="login.html" class="hover:text-blue-500">Login</a>
                        <a href="register.html" class="hover:text-blue-500">Daftar</a>
                        <a href="admin/dashboard.html" class="hover:text-blue-500">Admin</a>
                  </div>
                  <button class="md:hidden" id="menuBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none"
                              viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                  </button>
            </div>
            <div id="mobileMenu" class="md:hidden hidden bg-gray-100">
                  <a href="index.html" class="block px-4 py-2">Beranda</a>
                  <a href="report-create.html" class="block px-4 py-2 font-semibold text-blue-600">Buat Laporan</a>
                  <a href="login.html" class="block px-4 py-2">Login</a>
                  <a href="register.html" class="block px-4 py-2">Daftar</a>
                  <a href="admin/dashboard.html" class="block px-4 py-2">Admin</a>
            </div>
      </nav>

      <!-- Header -->
      <section class="bg-blue-600 text-white py-12 text-center">
            <h2 class="text-3xl font-bold">Laporkan Masalah Fasilitas Publik</h2>
            <p class="mt-2 text-blue-100">
                  Bantu kami memperbaiki lingkungan sekitar Anda
            </p>
      </section>

      <!-- Form Laporan -->
      <section class="max-w-4xl mx-auto bg-white shadow-lg rounded-xl p-8 mt-8 mb-16">
            <h3 class="text-2xl font-semibold mb-6 text-gray-700">
                  Formulir Laporan
            </h3>

            <form id="reportForm" class="space-y-6">
                  <!-- Judul -->
                  <div>
                        <label class="block text-gray-700 font-medium mb-2">Judul Laporan</label>
                        <input type="text"
                              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                              placeholder="Contoh: Lampu jalan mati di depan sekolah" required />
                  </div>

                  <!-- Kategori -->
                  <div>
                        <label class="block text-gray-700 font-medium mb-2">Kategori</label>
                        <select
                              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                              required>
                              <option value="">-- Pilih Kategori --</option>
                              <option>Jalan Rusak</option>
                              <option>Lampu Jalan Mati</option>
                              <option>Sampah Menumpuk</option>
                              <option>Saluran Air</option>
                              <option>Fasilitas Umum</option>
                        </select>
                  </div>

                  <!-- Deskripsi -->
                  <div>
                        <label class="block text-gray-700 font-medium mb-2">Deskripsi</label>
                        <textarea rows="5"
                              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"
                              placeholder="Ceritakan detail masalah yang Anda temukan..." required></textarea>
                  </div>

                  <!-- Upload Foto -->
                  <div>
                        <label class="block text-gray-700 font-medium mb-2">Upload Foto</label>
                        <input type="file" multiple accept="image/*"
                              class="block w-full text-gray-700 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:ring-2 focus:ring-blue-500" />
                        <p class="text-sm text-gray-500 mt-2">
                              Maksimal 5 foto, format JPG/PNG (max 5MB per foto)
                        </p>
                  </div>

                  <!-- Peta Lokasi -->
                  <div>
                        <label class="block text-gray-700 font-medium mb-2">Tentukan Lokasi di Peta</label>
                        <div id="map" class="h-80 w-full rounded-lg border border-gray-300"></div>
                        <div class="mt-3 text-sm text-gray-600">
                              <span>Koordinat terpilih: </span>
                              <span id="coords" class="font-semibold text-blue-700">Belum dipilih</span>
                        </div>
                  </div>

                  <!-- Checkbox Anonim -->
                  <div class="flex items-center space-x-2">
                        <input type="checkbox" id="anonymous" class="w-5 h-5 text-blue-600 border-gray-300 rounded" />
                        <label for="anonymous" class="text-gray-700">Laporkan secara anonim</label>
                  </div>

                  <!-- Tombol -->
                  <div class="text-right">
                        <button type="submit"
                              class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
                              Kirim Laporan
                        </button>
                  </div>
            </form>
      </section>

      <!-- Footer -->
      <footer class="bg-gray-800 text-gray-200 text-center py-6">
            <p>&copy; 2025 LaporPublik. Semua Hak Dilindungi.</p>
      </footer>

      <!-- Script Menu Mobile -->
      <script>
            document.getElementById("menuBtn").addEventListener("click", () => {
                  document.getElementById("mobileMenu").classList.toggle("hidden");
            });
      </script>

      <!-- Script Peta -->
      <script>
            // Inisialisasi peta
            const map = L.map("map").setView([0.5333, 101.4500], 12); // Default: Pekanbaru

            // Tambahkan tile dari OpenStreetMap
            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
                  attribution: "Â© OpenStreetMap contributors",
            }).addTo(map);

            let marker;

            // Event klik di peta
            map.on("click", function (e) {
                  const { lat, lng } = e.latlng;
                  document.getElementById("coords").innerText = `${lat.toFixed(
                        6
                  )}, ${lng.toFixed(6)}`;

                  if (marker) {
                        map.removeLayer(marker);
                  }
                  marker = L.marker([lat, lng])
                        .addTo(map)
                        .bindPopup("Lokasi laporan Anda")
                        .openPopup();
            });
      </script>
</body>

</html>